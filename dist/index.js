function tagQueueFactory(t){"use strict";var e=/^(http|https|):\/\/(.+?)\/(.+)$/,o=console&&console.log?console.error:function(){},n={},r={},i=function(e){if(!r[e]){if(!t.document)throw Error("URL loads are not supported without document");var o=t.document,n=o.getElementsByTagName("head")[0]||o.documentElement,i=o.createElement("script");i.src=e,r[e]=i,i.onload=i.onreadystatechange=function(){r[e]===!0||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r[e]=!0,i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),c.got(e))},n.insertBefore(i,n.firstChild)}},a=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},c=function(t,o,r){if(!(o&&o.constructor&&o.call&&o.apply))throw Error("Callback has to be a function.");if(a(t))for(var u,f=u=t.length,s=0;f>s;s++)c(t[s],function(){u--,0===u&&o()},r);else{if(n[t]===!0)return o(c);n[t]=n[t]||[],n[t].push(o),e.test(t)&&i(t),r===!0&&c.t(t)}};return c.got=function(t){if(n[t]!==!0){if(n[t]){n[t]._t&&clearInterval(n[t]._t);for(var e=n[t].shift();e;)try{e(c)}catch(r){o(r)}finally{e=n[t].shift()}}n[t]=!0}},c.t=function(e){function o(){n[e]._t=setTimeout(function(){return t[e]?c.got(e):void o()},100)}n[e]=n[e]||[],o()},c.process=function(t,e){if(t&&t.length){e||(e=function(t){try{t(c)}catch(e){}});for(var o=t.shift();o;)a(o)?!function(t,e){c(t[0],function(){e(t[1])},t[2])}(o,e):e(o),o=t.shift()}},c}!function(t,e){return"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?void(module.exports=e):(t.tagQueue=e(t),void(t.tq||(t.tq=t.tagQueue)))}(this,tagQueueFactory);