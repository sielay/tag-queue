function tagQueueFactory(t){"use strict";function e(t,n){if(!t)return null;if(n.indexOf(".")>-1){var o=n.split("."),r=o.shift();return e(t[r],o.join("."))}return t[n]}var n=/^(http|https|):\/\/(.+?)\/(.+)$/,o=console&&console.log?console.error:function(){},r={},i={},a=function(e){if(!i[e]){if(!t.document)throw Error("URL loads are not supported without document");var n=t.document,o=n.getElementsByTagName("head")[0]||n.documentElement,r=n.createElement("script");r.src=e,i[e]=r,r.onload=r.onreadystatechange=function(){i[e]===!0||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i[e]=!0,r.onload=r.onreadystatechange=null,o&&r.parentNode&&o.removeChild(r),u.got(e))},o.insertBefore(r,o.firstChild)}},c=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},u=function(t,e,o){if(!(e&&e.constructor&&e.call&&e.apply))throw Error("Callback has to be a function.");if(c(t))for(var i,f=i=t.length,s=0;f>s;s++)u(t[s],function(){i--,0===i&&e()},o);else{if(r[t]===!0)return e(u);r[t]=r[t]||[],r[t].push(e),n.test(t)&&a(t),o===!0&&u.t(t)}};return u.got=function(t){if(r[t]!==!0){if(r[t]){r[t]._t&&clearInterval(r[t]._t);for(var e=r[t].shift();e;)try{e(u)}catch(n){o(n)}finally{e=r[t].shift()}}r[t]=!0}},u.t=function(n){function o(){r[n]._t=setTimeout(function(){return e(t,n)?u.got(n):void o()},100)}r[n]=r[n]||[],o()},u.process=function(t,e){if(t||t.length){e||(e=function(t){try{t(u)}catch(e){}});for(var n=t.shift();n;)c(n)?!function(t,e){u(t[0],function(){e(t[1])},t[2])}(n,e):e(n),n=t.shift()}setTimeout(function(){u.process(t,e)},250)},u}!function(t,e){return"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?void(module.exports=e):(t.tagQueue=e(t),void(t.tq||(t.tq=t.tagQueue)))}(this,tagQueueFactory);